<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UnifyDoc</title>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5CV2026CXH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-5CV2026CXH');
  </script>

  <link rel="stylesheet" href="../static/css/index.css">
  <script>
    function showSection(sectionId) {
        // Hide all sections
        document.getElementById('upload-section').style.display = 'none';
        document.getElementById('login-section').style.display = 'none';
        document.getElementById('register-section').style.display = 'none';
        // Show the selected section
        if (sectionId) {
            document.getElementById(sectionId).style.display = 'flex'; // Use flex to maintain layout
        }
    }
    function goBackToUpload() {
      // Show the upload section and hide login/register sections
      showSection('upload-section');
    }
    document.addEventListener("DOMContentLoaded", function() {
      var video = document.querySelector('.background-video');
      video.playbackRate = 0.75; // Change this value to adjust the speed
      // Global Notification Animation
      var notifications = document.querySelectorAll('.alert-notification');
      notifications.forEach(function(notification) {
          // Force reflow to ensure transition works
          void notification.offsetWidth;
          notification.classList.add('show');
          setTimeout(function(){
              notification.classList.remove('show');
          }, 8000);
      });
    });
  </script>
  <script>
    function enterView() {
        document.getElementById('form-section').style.display = 'none';
        document.getElementById('pdf-view-section').style.display = 'block';
    }

    function exitView() {
        document.getElementById('pdf-view-section').style.display = 'none';
        document.getElementById('form-section').style.display = 'block';
    }
  </script>
  <!-- Removed PayPal subscription scripts since we're no longer using them -->
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="nav-left">
      <!-- Direct Donate button (opens in a new tab) -->
      <a href="https://www.paypal.com/donate/?hosted_button_id=AS22M4RMC5HXL" target="_blank" class="nav-button">Donate</a>
    </div>
    <div class="nav-right">
      <a href="https://thomasschwartz18.github.io/MotherSite/index.html" target="_blank">
        Check out our other web tools
        <img src="../static/images/exit_to_app_24dp_1F1F1F_FILL0_wght400_GRAD0_opsz24.png" alt="">
      </a>
    </div>
  </nav>
  <!-- Global Notification Container -->
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div id="notification-container">
        {% for message in messages %}
          <div class="alert-notification">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}
  <video autoplay muted loop playsinline class="background-video">
    <source src="../static/images/background_video.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <!-- Upload Section -->
  <div id="upload-section" class="container" style="display: {% if section=='upload-section' %}flex{% else %}none{% endif %};">
    <!-- Left Section: Intro and File Info Table -->
    <div class="left-section">
      <h1>Let's glide into the future together...</h1>
      <h2>Combine text documents into PDF files for easy storage and sharing.</h2>
      <table class="file-info-table">
        <thead>
          <tr>
            <th></th>
            <th>Description</th>
            <th>File Types</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Supported</td>
            <td>Files that are processed and included in the PDF.</td>
            <td>.py, .txt, .html, .js, .css, .java, .cpp, .c, .json, .md, .php, .sql, .doc, .docx, .pdf, .png, .jpg, .jpeg, .svg, .zip</td>
          </tr>
          <tr>
            <td>Ignored</td>
            <td>Files that are skipped as they are non-text or unsupported for user security.</td>
            <td>.exe, .dll, .env</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Right Section: Upload Form and PDF Preview -->
    <div class="right-section">
      <!-- Form and Download Options Container -->
      <div id="form-section">
        <form action="/" method="post" enctype="multipart/form-data">
          <h2>Upload text document or ZIP Folder</h2>
          <input type="file" name="files" class="file-input" multiple required>
          <fieldset>
            <legend>PDF Settings</legend>
            <label for="margin">Margin (points):</label>
            <input type="number" id="margin" name="margin" value="10" min="0"><br>
            
            <label for="header_note">Header Note:</label>
            <input type="text" id="header_note" name="header_note" placeholder="Optional header text"><br>
            
            <label for="footer_note">Footer Note:</label>
            <input type="text" id="footer_note" name="footer_note" placeholder="Optional footer text"><br>
            
            <label>Orientation:</label>
            <input type="radio" id="portrait" name="orientation" value="portrait" checked>
            <label for="portrait">Portrait</label>
            <input type="radio" id="landscape" name="orientation" value="landscape">
            <label for="landscape">Landscape</label><br>
            
            <label for="page_size">Page Size:</label>
            <select id="page_size" name="page_size">
              <option value="letter" selected>Letter (612 x 792)</option>
              <option value="a4">A4 (595 x 842)</option>
              <option value="legal">Legal (612 x 1008)</option>
            </select>
          </fieldset>
          <button type="submit">Convert to PDF</button>
        </form>
        {% if pdf_url %}
        <div class="download-section">
          <h3>View or Download your PDF:</h3>
          <!-- Use the new function to enter view mode -->
          <button onclick="enterView()">View</button>
          <a href="{{ pdf_url }}" class="pdf-button download-btn" download>Download</a>
        </div>
        {% endif %}
      </div>

      <!-- PDF Preview Container (Initially Hidden) -->
      <div id="pdf-view-section" style="display: none;">
        <div class="view-header">
          <button onclick="exitView()">Exit View</button>
          <a href="{{ pdf_url }}" class="pdf-button download-btn" download>Download</a>
        </div>
        <div id="pdf-view-container">
          <iframe src="{{ view_url }}"></iframe>
        </div>
      </div>
    </div>
  </div>
  <footer>
    <p>Last updated: March 5, 2025</p>
    <p>&copy; 2025 N&T Development</p>
  </footer>
</body>
</html>
